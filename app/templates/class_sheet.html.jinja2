{% if not request.headers.hx_request %}
{% extends "layout.html.jinja2" %}
{% block title %}{{ class_data.name }} &mdash; Classes | {% endblock %}
{% endif %}
{% block content %}
<div id="classSheet">
    <div class="unit-head-container">
        <div class="div1">
            <img src="{{ url_for('static',filename='images/map_sprites/'+class_data.map_sprite_nid+'-stand.webp') }}"
                height="96" width="96" />
        </div>
        <div class="div2">
            <hgroup>
                <h2>{{ class_data.name }}</h2>
                <p>{{ class_data.desc }}
                    {% if class_data.weapons%}
                    <br />
                    <span class="lt-color-red">Prof:</span>
                    {% for weapon_type in class_data.weapons%}
                    <span class=" Wexpicons-icon {{ weapon_type }}-subIcon"></span>
                    {% endfor %}
                    {% endif %}
                </p>
            </hgroup>
        </div>
    </div>

    <div class="overflow-auto">
        <table class="striped">
            {% set stat_names = ('HP','STR','MAG','SKL','SPD','LCK','DEF','RES','CON','MOV') %}
            <thead>
                <tr>
                    <th scope="col">Stat</th>
                    {% for stat_name in stat_names %}
                    <th scope="col">{{ stat_name }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th scope="row">On Promo</th>
                    {% for stat_name in stat_names[:-1] %}
                    <td>+{{ class_data.promotion[stat_name] }}</td>
                    {% endfor %}
                    <td>{{ class_data.bases['MOV'] }}</td>
                </tr>
                <tr>
                    <th scope="row">Growth</th>
                    {% for stat_name in stat_names %}
                    <td>+{{ class_data.growth_bonus[stat_name] }}%</td>
                    {% endfor %}
                </tr>
                <tr>
                    <th scope="row">Cap</th>
                    {% for stat_name in stat_names %}
                    <td>{{ class_data.max_stats[stat_name] }}</td>
                    {% endfor %}
                </tr>
        </table>
    </div>

    {% if class_data.learned_skills %}
    <details open>
        <summary>Skills</summary>
        <div class="grid">
            {% for skill_lvl,skill_nid in class_data.learned_skills %}
            <div>
                <p>Level {{skill_lvl}}</p>
                <div hx-get=/skills/{{skill_nid}} hx-trigger=" load" hx-target="this" hx-swap="outerHTML">
                </div>
            </div>
            {% endfor %}
        </div>
    </details>
    <hr />
    {% endif %}


    {% if class_promo_data.turns_into or class_promo_data.turns_from%}
    <div class="grid">
        {% if class_promo_data.turns_from %}
        <details open>
            <summary>Promotes From</summary>
            <ul>
                {% for prev_class_data in class_promo_data.turns_from %}
                <li><a href="#" hx-get="/classes/{{prev_class_data.nid}}" hx-target="#classSheet"
                        hx-vals='{"addCopy":"True"}' hx-swap="outerHTML">{{prev_class_data.name}} {% if
                        prev_class_data.alt_name %}({{
                        prev_class_data.alt_name }}){% endif %}</a>
                </li>
                {% endfor %}
            </ul>
        </details>
        {% endif %}
        {% if class_promo_data.turns_into %}
        <details open>
            <summary>Promotes To</summary>
            <ul>
                {% for next_class_data in class_promo_data.turns_into %}
                <li><a href="#" hx-get="/classes/{{next_class_data.nid}}" hx-target="#classSheet"
                        hx-vals='{"addCopy":"True"}' hx-swap="outerHTML">{{next_class_data.name}} {% if
                        next_class_data.alt_name %}({{
                        next_class_data.alt_name }}){% endif %}</a>
                </li>
                {% endfor %}
            </ul>
        </details>
        {% endif %}
    </div>
    {% endif %}

</div>
{% endblock content %}